zabbix_export:
  version: '5.2'
  date: '2021-05-06T21:44:28Z'
  groups:
    -
      name: Templates/Modules
  templates:
    -
      template: 'Humidity and Temperature monitoring TA'
      name: 'Humidity and Temperature monitoring TA'
      description: 'Generated by mib2zabbix'
      groups:
        -
          name: Templates/Modules
      applications:
        -
          name: Humidity
        -
          name: Temperature
        -
          name: 'Temperature Alarm'
      items:
        -
          name: 'humidity[port1]'
          type: DEPENDENT
          key: 'humidity[port1]'
          delay: '0'
          units: '%'
          applications:
            -
              name: Humidity
          preprocessing:
            -
              type: REGEX
              parameters:
                - 'enterprises.27297.1.4 "(\d+)'
                - \1
          master_item:
            key: 'snmptrap["port1.*\n.*enterprises.27297.1.4.*"]'
          triggers:
            -
              expression: '{min(#3)}>{$HUMIDITY.ABOVE}'
              name: 'Humidity above {$HUMIDITY.ABOVE} on port1'
              priority: HIGH
              manual_close: 'YES'
            -
              expression: '{max(#3)}<{$HUMIDITY.BELOW}'
              name: 'Humidity below {$HUMIDITY.BELOW} on port1'
              priority: HIGH
              manual_close: 'YES'
        -
          name: 'humidity[port2]'
          type: DEPENDENT
          key: 'humidity[port2]'
          delay: '0'
          units: '%'
          applications:
            -
              name: Humidity
          preprocessing:
            -
              type: REGEX
              parameters:
                - 'enterprises.27297.1.4 "(\d+)'
                - \1
          master_item:
            key: 'snmptrap["port2.*\n.*enterprises.27297.1.4.*"]'
          triggers:
            -
              expression: '{min(#3)}>{$HUMIDITY.ABOVE}'
              name: 'Humidity above {$HUMIDITY.ABOVE} on port2'
              priority: HIGH
              manual_close: 'YES'
            -
              expression: '{max(#3)}<{$HUMIDITY.BELOW}'
              name: 'Humidity below {$HUMIDITY.BELOW} on port2'
              priority: HIGH
              manual_close: 'YES'
        -
          name: taNormal
          type: SNMP_TRAP
          key: 'snmptrap["1\.3\.6\.1\.4\.1\.27297\.0\.1"]'
          delay: '0'
          history: 1d
          trends: '0'
          value_type: LOG
          applications:
            -
              name: 'Temperature Alarm'
        -
          name: taHighAlarm
          type: SNMP_TRAP
          key: 'snmptrap["1\.3\.6\.1\.4\.1\.27297\.0\.2"]'
          delay: '0'
          history: 1d
          trends: '0'
          value_type: LOG
          applications:
            -
              name: 'Temperature Alarm'
        -
          name: taLowAlarm
          type: SNMP_TRAP
          key: 'snmptrap["1\.3\.6\.1\.4\.1\.27297\.0\.3"]'
          delay: '0'
          history: 1d
          trends: '0'
          value_type: LOG
          applications:
            -
              name: 'Temperature Alarm'
        -
          name: taShutdown
          type: SNMP_TRAP
          key: 'snmptrap["1\.3\.6\.1\.4\.1\.27297\.0\.4"]'
          delay: '0'
          history: 1d
          trends: '0'
          value_type: LOG
          applications:
            -
              name: 'Temperature Alarm'
        -
          name: 'Temperature port1'
          type: SNMP_TRAP
          key: 'snmptrap["port1.*\n.*enterprises.27297.1.2.*"]'
          delay: '0'
          history: 1d
          trends: '0'
          value_type: LOG
          applications:
            -
              name: Temperature
        -
          name: 'Humidity port1'
          type: SNMP_TRAP
          key: 'snmptrap["port1.*\n.*enterprises.27297.1.4.*"]'
          delay: '0'
          history: 1d
          trends: '0'
          value_type: LOG
          applications:
            -
              name: Humidity
        -
          name: 'Temperature port2'
          type: SNMP_TRAP
          key: 'snmptrap["port2.*\n.*enterprises.27297.1.2.*"]'
          delay: '0'
          history: 1d
          trends: '0'
          value_type: LOG
          applications:
            -
              name: Temperature
        -
          name: 'Humidity port2'
          type: SNMP_TRAP
          key: 'snmptrap["port2.*\n.*enterprises.27297.1.4.*"]'
          delay: '0'
          history: 1d
          trends: '0'
          value_type: LOG
          applications:
            -
              name: Humidity
        -
          name: Temperature
          type: SNMP_TRAP
          key: 'snmptrap["\.1\.3\.6\.1\.4\.1\.27297\.1\.2"]'
          delay: '0'
          history: 1d
          trends: '0'
          value_type: LOG
          applications:
            -
              name: Temperature
        -
          name: Humidity
          type: SNMP_TRAP
          key: 'snmptrap["\.1\.3\.6\.1\.4\.1\.27297\.1\.4"]'
          delay: '0'
          history: 1d
          trends: '0'
          value_type: LOG
          applications:
            -
              name: Humidity
        -
          name: 'temperature[port1]'
          type: DEPENDENT
          key: 'temperature[port1]'
          delay: '0'
          value_type: FLOAT
          units: C
          applications:
            -
              name: Temperature
          preprocessing:
            -
              type: REGEX
              parameters:
                - 'enterprises.27297.1.2 "(\S+)'
                - \1
          master_item:
            key: 'snmptrap["port1.*\n.*enterprises.27297.1.2.*"]'
          triggers:
            -
              expression: '{min(#3)}>{$TEMP.ABOVE}'
              name: 'Temperature above {$TEMP.ABOVE} on port1'
              priority: HIGH
              manual_close: 'YES'
            -
              expression: '{max(#3)}<{$TEMP.BELOW}'
              name: 'Temperature below {$TEMP.BELOW} on port1'
              priority: HIGH
              manual_close: 'YES'
        -
          name: 'temperature[port2]'
          type: DEPENDENT
          key: 'temperature[port2]'
          delay: '0'
          value_type: FLOAT
          units: C
          applications:
            -
              name: Temperature
          preprocessing:
            -
              type: REGEX
              parameters:
                - 'enterprises.27297.1.2 "(\S+)'
                - \1
          master_item:
            key: 'snmptrap["port2.*\n.*enterprises.27297.1.2.*"]'
          triggers:
            -
              expression: '{min(#3)}>{$TEMP.ABOVE}'
              name: 'Temperature above {$TEMP.ABOVE} on port2'
              priority: HIGH
              manual_close: 'YES'
            -
              expression: '{max(#3)}<{$TEMP.BELOW}'
              name: 'Temperature below {$TEMP.BELOW} on port2'
              priority: HIGH
              manual_close: 'YES'
      tags:
        -
          tag: Action
          value: Email
      macros:
        -
          macro: '{$HUMIDITY.ABOVE}'
          value: '61'
        -
          macro: '{$HUMIDITY.BELOW}'
          value: '29'
        -
          macro: '{$TEMP.ABOVE}'
          value: '28'
        -
          macro: '{$TEMP.BELOW}'
          value: '15'
  graphs:
    -
      name: 'Humidity port1'
      yaxismax: '80'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        -
          sortorder: '1'
          color: 0040FF
          item:
            host: 'Humidity and Temperature monitoring TA'
            key: 'humidity[port1]'
    -
      name: 'Humidity port2'
      yaxismax: '80'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        -
          sortorder: '1'
          color: 0040FF
          item:
            host: 'Humidity and Temperature monitoring TA'
            key: 'humidity[port2]'
    -
      name: 'Temperature port1'
      yaxismax: '50'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        -
          sortorder: '1'
          color: F63100
          item:
            host: 'Humidity and Temperature monitoring TA'
            key: 'temperature[port1]'
    -
      name: 'Temperature port2'
      yaxismax: '50'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        -
          sortorder: '1'
          color: F63100
          item:
            host: 'Humidity and Temperature monitoring TA'
            key: 'temperature[port2]'
