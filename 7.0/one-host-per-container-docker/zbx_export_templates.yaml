zabbix_export:
  version: '7.0'
  template_groups:
    - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
      name: Templates/Applications
    - uuid: 57b7ae836ca64446ba2c296389c009b7
      name: Templates/Modules
  host_groups:
    - uuid: ed5d8f1963454f6bba2abf6253632a76
      name: 'Docker containers'
  templates:
    - uuid: 6bdc58e8db4b4638aca84c4cb755c8ae
      template: 'Docker by Zabbix agent 2 mod'
      name: 'Docker by Zabbix agent 2 mod'
      description: |
        Get Docker engine metrics from plugin for the New Zabbix Agent (zabbix-agent2).
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/435429-discussion-thread-for-official-zabbix-template-docker
        
        Generated by official Zabbix template tool "Templator"
      groups:
        - name: Templates/Applications
      items:
        - uuid: 30435a7f68ff4cd6bbd967ed53af86b9
          name: Architecture
          type: DEPENDENT
          key: docker.architecture
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.Architecture
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: os
        - uuid: 56b2c1d086564b62af49de6b9ffa8bd1
          name: 'Cgroup driver'
          type: DEPENDENT
          key: docker.cgroup_driver
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.CgroupDriver
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: os
        - uuid: a003da1edb904d2ca841d5e17cf83bfd
          name: 'Get containers'
          key: docker.containers
          history: '0'
          value_type: TEXT
          trends: '0'
          tags:
            - tag: component
              value: raw
        - uuid: 0c54b517e1c54f2695f0bf5a7da88074
          name: 'Containers paused'
          type: DEPENDENT
          key: docker.containers.paused
          delay: '0'
          description: 'Total number of containers paused on this host.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.ContainersPaused
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: containers
        - uuid: 6d6c0449c3d541d385fdafb8fdbfa907
          name: 'Containers running'
          type: DEPENDENT
          key: docker.containers.running
          delay: '0'
          description: 'Total number of containers running on this host.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.ContainersRunning
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: containers
        - uuid: 484b1e77ceb44ff2863db5c0815a3c68
          name: 'Containers stopped'
          type: DEPENDENT
          key: docker.containers.stopped
          delay: '0'
          description: 'Total number of containers stopped on this host.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.ContainersStopped
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: containers
        - uuid: 369bcf82387442c99a859e214021731c
          name: 'Containers total'
          type: DEPENDENT
          key: docker.containers.total
          delay: '0'
          description: 'Total number of containers on this host.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.Containers
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: containers
        - uuid: 610413398d5e479281396952347ad8e0
          name: 'Containers size'
          type: DEPENDENT
          key: docker.containers_size
          delay: '0'
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.Containers[*].SizeRw.sum()'
          master_item:
            key: docker.data_usage
          tags:
            - tag: component
              value: containers
            - tag: component
              value: storage
        - uuid: 13038083f6004da1a034820174212a08
          name: 'CPU CFS Period enabled'
          type: DEPENDENT
          key: docker.cpu_cfs_period.enabled
          delay: '0'
          description: 'https://docs.docker.com/config/containers/resource_constraints/#configure-the-default-cfs-scheduler'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.CpuCfsPeriod
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: cpu
        - uuid: bac7f14c0fb04717b4dc77840a870fd1
          name: 'CPU CFS Quota enabled'
          type: DEPENDENT
          key: docker.cpu_cfs_quota.enabled
          delay: '0'
          description: 'https://docs.docker.com/config/containers/resource_constraints/#configure-the-default-cfs-scheduler'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.CpuCfsQuota
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: cpu
        - uuid: 7ac9cd9825824ad0bca77dbc68e1d241
          name: 'CPU Set enabled'
          type: DEPENDENT
          key: docker.cpu_set.enabled
          delay: '0'
          description: 'https://docs.docker.com/config/containers/resource_constraints/#configure-the-default-cfs-scheduler'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.CPUSet
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: cpu
        - uuid: 60d5f2dc09564337b6975f04950936e0
          name: 'CPU Shares enabled'
          type: DEPENDENT
          key: docker.cpu_shares.enabled
          delay: '0'
          description: 'https://docs.docker.com/config/containers/resource_constraints/#configure-the-default-cfs-scheduler'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.CPUShares
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: cpu
        - uuid: a56ebddbba2c4c07bb8b3d401ca281f4
          name: 'Get data_usage'
          key: docker.data_usage
          history: '0'
          value_type: TEXT
          trends: '0'
          tags:
            - tag: component
              value: raw
        - uuid: 736b904642e0426c8b17ff216ac82e10
          name: 'Debug enabled'
          type: DEPENDENT
          key: docker.debug.enabled
          delay: '0'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.Debug
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: application
        - uuid: 0b07b176d8e948b09c2be77fc73059d5
          name: 'Default runtime'
          type: DEPENDENT
          key: docker.default_runtime
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.DefaultRuntime
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: application
        - uuid: 1977184445284f128eac536e320d4da3
          name: 'Storage driver'
          type: DEPENDENT
          key: docker.driver
          delay: '0'
          value_type: CHAR
          trends: '0'
          description: |
            Docker storage driver.
            https://docs.docker.com/storage/storagedriver/
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.Driver
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: storage
        - uuid: 588d0aa82779454384d31d88d4724dc6
          name: Goroutines
          type: DEPENDENT
          key: docker.goroutines
          delay: '0'
          description: 'Number of goroutines.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.NGoroutines
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: system
        - uuid: d066570dc515491f873bffdf7b1956c2
          name: 'Get images'
          key: docker.images
          history: '0'
          value_type: TEXT
          trends: '0'
          tags:
            - tag: component
              value: raw
        - uuid: 471766fbae464898afd648fc57a5ab16
          name: 'Images available'
          type: DEPENDENT
          key: docker.images.top_level
          delay: '0'
          description: 'Number of top-level images.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.length()
          master_item:
            key: docker.images
          tags:
            - tag: component
              value: images
        - uuid: c6ac1ecf7ac847908bec30b9055f7584
          name: 'Images total'
          type: DEPENDENT
          key: docker.images.total
          delay: '0'
          description: 'Number of images with intermediate image layers.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.Images
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: images
        - uuid: fe064383340b47758d29b4450955af41
          name: 'Images size'
          type: DEPENDENT
          key: docker.images_size
          delay: '0'
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.Images[*].Size.sum()'
          master_item:
            key: docker.data_usage
          tags:
            - tag: component
              value: images
            - tag: component
              value: storage
        - uuid: ead130db14e5478f9843b0ece3dce233
          name: 'Get info'
          key: docker.info
          history: '0'
          value_type: TEXT
          trends: '0'
          tags:
            - tag: component
              value: raw
        - uuid: ed20a48dc1264888aa1770e54731bfaa
          name: 'IPv4 Forwarding enabled'
          type: DEPENDENT
          key: docker.ipv4_forwarding.enabled
          delay: '0'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.IPv4Forwarding
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: network
        - uuid: e208581b655544daa612adade0190f9f
          name: 'Kernel memory enabled'
          type: DEPENDENT
          key: docker.kernel_mem.enabled
          delay: '0'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.KernelMemory
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: memory
        - uuid: 13138d5c5eab42a78adb563448c59554
          name: 'Kernel memory TCP enabled'
          type: DEPENDENT
          key: docker.kernel_mem_tcp.enabled
          delay: '0'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.KernelMemoryTCP
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: memory
        - uuid: 6ff9eb62678a41648b25c92c60294273
          name: 'Kernel version'
          type: DEPENDENT
          key: docker.kernel_version
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.KernelVersion
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: system
        - uuid: 165d2c90b0e2466ca5a05207cead66fb
          name: 'Layers size'
          type: DEPENDENT
          key: docker.layers_size
          delay: '0'
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.LayersSize
          master_item:
            key: docker.data_usage
          tags:
            - tag: component
              value: storage
        - uuid: 0c9fcb9a29e74864a2b59f501b23e04e
          name: 'Live restore enabled'
          type: DEPENDENT
          key: docker.live_restore.enabled
          delay: '0'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.LiveRestoreEnabled
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: application
        - uuid: 966ba27d9b7649dea153d3a2e9d99c19
          name: 'Logging driver'
          type: DEPENDENT
          key: docker.logging_driver
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.LoggingDriver
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: application
        - uuid: 9a4ae05c967540abb983ca5d910d4e26
          name: 'Memory total'
          type: DEPENDENT
          key: docker.mem.total
          delay: '0'
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.MemTotal
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: memory
        - uuid: bfb22c39661f4cb7a80fa473e117048d
          name: 'Memory limit enabled'
          type: DEPENDENT
          key: docker.mem_limit.enabled
          delay: '0'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.MemoryLimit
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: memory
        - uuid: 31fca89d20ed4b2f8a3531e26138e4e8
          name: Name
          type: DEPENDENT
          key: docker.name
          delay: '0'
          history: 1h
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.Name
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 1c3a1d5a454d41f2af944c66aa4ee632
              expression: 'nodata(/Docker by Zabbix agent 2 mod/docker.name,30m)=1'
              name: 'Docker: Failed to fetch info data'
              event_name: 'Docker: Failed to fetch info data (or no data for 30m)'
              priority: WARNING
              description: 'Zabbix has not received data for items for the last 30 minutes.'
              manual_close: 'YES'
              dependencies:
                - name: 'Docker: Service is down'
                  expression: 'last(/Docker by Zabbix agent 2 mod/docker.ping)=0'
              tags:
                - tag: scope
                  value: availability
        - uuid: 01406164321e41f5afd3c0462df1d1af
          name: NCPU
          type: DEPENDENT
          key: docker.ncpu
          delay: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.NCPU
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: cpu
        - uuid: ab503c676088487a8585acd8426d0200
          name: 'NEvents listener'
          type: DEPENDENT
          key: docker.nevents_listener
          delay: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.NEventsListener
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: application
        - uuid: a90aec8387254f69a005c0d7f5e8c176
          name: Nfd
          type: DEPENDENT
          key: docker.nfd
          delay: '0'
          description: 'Number of used File Descriptors.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.NFd
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: os
        - uuid: 80f0d80f1d9445a59ad5700dd0435810
          name: 'OomKill disabled'
          type: DEPENDENT
          key: docker.oomkill.disabled
          delay: '0'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.OomKillDisable
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: system
        - uuid: 9350ea7fcf0142189360586a81d3e871
          name: 'Operating system'
          type: DEPENDENT
          key: docker.operating_system
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.OperatingSystem
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: os
        - uuid: aa22c85f2586411c8d392a741f85fa8a
          name: 'OS type'
          type: DEPENDENT
          key: docker.os_type
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.OSType
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: os
        - uuid: ff930f663c7b4bd09d42fd23482bae11
          name: 'Pids limit enabled'
          type: DEPENDENT
          key: docker.pids_limit.enabled
          delay: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.PidsLimit
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: system
        - uuid: e31f6ff103b849f28a28297bf0ec8808
          name: Ping
          key: docker.ping
          valuemap:
            name: 'Service state'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          tags:
            - tag: component
              value: application
            - tag: component
              value: health
          triggers:
            - uuid: 906aa95424d24089a56d7a251f73f5b9
              expression: 'last(/Docker by Zabbix agent 2 mod/docker.ping)=0'
              name: 'Docker: Service is down'
              priority: AVERAGE
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: availability
        - uuid: 3d7d268097ce43b68884755428619140
          name: 'Docker root dir'
          type: DEPENDENT
          key: docker.root_dir
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.DockerRootDir
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: system
        - uuid: a9a5caff4c234428aaa7aec79ac4445b
          name: 'Server version'
          type: DEPENDENT
          key: docker.server_version
          delay: '0'
          value_type: CHAR
          trends: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.ServerVersion
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: application
          triggers:
            - uuid: c760e13b68e14a0ea96ab7e26b4926ed
              expression: 'last(/Docker by Zabbix agent 2 mod/docker.server_version,#1)<>last(/Docker by Zabbix agent 2 mod/docker.server_version,#2) and length(last(/Docker by Zabbix agent 2 mod/docker.server_version))>0'
              name: 'Docker: Version has changed'
              event_name: 'Docker: Version has changed (new version: {ITEM.VALUE})'
              priority: INFO
              description: 'Docker version has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 5827ba9733a64057a53eceba5dcb904e
          name: 'Swap limit enabled'
          type: DEPENDENT
          key: docker.swap_limit.enabled
          delay: '0'
          valuemap:
            name: 'Docker flag'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.SwapLimit
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: docker.info
          tags:
            - tag: component
              value: memory
            - tag: component
              value: storage
        - uuid: c2b87e6f2c0e491db39b808443707d1a
          name: 'Volumes size'
          type: DEPENDENT
          key: docker.volumes_size
          delay: '0'
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.Volumes[*].UsageData.Size.sum()'
          master_item:
            key: docker.data_usage
          tags:
            - tag: component
              value: storage
      discovery_rules:
        - uuid: 894f3d494a0c48faaea8ccfe3267386e
          name: 'Containers discovery'
          key: 'docker.containers.discovery[false]'
          delay: 15m
          filter:
            evaltype: AND
            conditions:
              - macro: '{#NAME}'
                value: '{$DOCKER.LLD.FILTER.CONTAINER.MATCHES}'
                formulaid: A
              - macro: '{#NAME}'
                value: '{$DOCKER.LLD.FILTER.CONTAINER.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: |
            Discovery of containers metrics.
            
            Parameter:
            true  - Returns all containers
            false - Returns only running containers
          item_prototypes:
            - uuid: f8791a3cfde54e3eba59b42d707c5f76
              name: 'Container {#NAME}: Created'
              type: DEPENDENT
              key: 'docker.container_info.created["{#NAME}"]'
              delay: '0'
              units: unixtime
              valuemap:
                name: 'Docker date format'
              preprocessing:
                - type: JAVASCRIPT
                  parameters:
                    - |
                      var input = JSON.parse(value);
                        return truncatedTimestamp = Math.floor(Date.parse(input.Created) / 1000) || -1;
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: ff4e0f63ef49498291e50d5c84547f8c
              name: 'Container {#NAME}: Finished at'
              type: DEPENDENT
              key: 'docker.container_info.finished["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              units: unixtime
              description: 'Time at which the container last terminated.'
              valuemap:
                name: 'Docker date format'
              preprocessing:
                - type: JAVASCRIPT
                  parameters:
                    - |
                      var input = JSON.parse(value);
                        return truncatedTimestamp = Math.floor(Date.parse(input.State.FinishedAt) / 1000) || -1;
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: 0f2171ec9dca4a2c99bcd716b84e566b
              name: 'Container {#NAME}: Image'
              type: DEPENDENT
              key: 'docker.container_info.image["{#NAME}"]'
              delay: '0'
              value_type: CHAR
              trends: '0'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$[?(@.Names[0] == "{#NAME}")].Image.first()'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              master_item:
                key: docker.containers
              tags:
                - tag: component
                  value: images
                - tag: container
                  value: '{#NAME}'
            - uuid: 0b8da21082a4438182a0395606fbdeeb
              name: 'Container {#NAME}: Restart count'
              type: DEPENDENT
              key: 'docker.container_info.restart_count["{#NAME}"]'
              delay: '0'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.RestartCount
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: 87639d91da5541a78e167cda75c82240
              name: 'Container {#NAME}: Started at'
              type: DEPENDENT
              key: 'docker.container_info.started["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              units: unixtime
              valuemap:
                name: 'Docker date format'
              preprocessing:
                - type: JAVASCRIPT
                  parameters:
                    - |
                      var input = JSON.parse(value);
                        return truncatedTimestamp = Math.floor(Date.parse(input.State.StartedAt) / 1000) || -1;
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: 399f75e473c940b3a3417f21695a1848
              name: 'Container {#NAME}: Dead'
              type: DEPENDENT
              key: 'docker.container_info.state.dead["{#NAME}"]'
              delay: '0'
              valuemap:
                name: 'Docker flag'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.State.Dead
                - type: BOOL_TO_DECIMAL
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: a4d7506726d341d89d9fd8905f7318e9
              name: 'Container {#NAME}: Error'
              type: DEPENDENT
              key: 'docker.container_info.state.error["{#NAME}"]'
              delay: '0'
              value_type: CHAR
              trends: '0'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.State.Error
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
              trigger_prototypes:
                - uuid: c5133a3f71714958af54f9bceb5927ef
                  expression: 'last(/Docker by Zabbix agent 2 mod/docker.container_info.state.error["{#NAME}"],#1)<>last(/Docker by Zabbix agent 2 mod/docker.container_info.state.error["{#NAME}"],#2) and length(last(/Docker by Zabbix agent 2 mod/docker.container_info.state.error["{#NAME}"]))>0'
                  name: 'Docker: Container {#NAME}: An error has occurred in the container'
                  event_name: 'Docker: Container {#NAME}: Version has changed (new version: {ITEM.VALUE})'
                  priority: WARNING
                  description: 'Container {#NAME} has an error. Acknowledge to close the problem manually.'
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: c05c830749004777816593aee602d5c8
              name: 'Container {#NAME}: Exit code'
              type: DEPENDENT
              key: 'docker.container_info.state.exitcode["{#NAME}"]'
              delay: '0'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.State.ExitCode
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: 1c2ebedef6cc44cf8253a651064adcfc
              name: 'Container {#NAME}: Health failing streak'
              type: DEPENDENT
              key: 'docker.container_info.state.health.failing["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.State.Health.FailingStreak
                  error_handler: DISCARD_VALUE
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: c5f82a2448544a848c9b63c2b2aa390f
              name: 'Container {#NAME}: Health status'
              type: DEPENDENT
              key: 'docker.container_info.state.health["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              description: 'Container''s `HEALTHCHECK`.'
              valuemap:
                name: 'Docker container health state'
              preprocessing:
                - type: JAVASCRIPT
                  parameters:
                    - |
                      var input = JSON.parse(value);
                      if (typeof input.State.Health !== 'object' || typeof input.State.Health === 'undefined') {
                        return 4;
                      }
                        return (['starting', 'unhealthy', 'healthy', 'none'].indexOf(input.State.Health.Status) + 1);
                - type: IN_RANGE
                  parameters:
                    - '1'
                    - '4'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '4'
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
              trigger_prototypes:
                - uuid: adacb3d220ea49578a509fca2969c27f
                  expression: 'count(/Docker by Zabbix agent 2 mod/docker.container_info.state.health["{#NAME}"],2m,,2)>=2'
                  name: 'Docker: Container {#NAME}: Health state container is unhealthy'
                  opdata: '{ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'Container health state is unhealthy.'
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 88a5c4c55a8b4e188be1d188ea290b88
              name: 'Container {#NAME}: OOMKilled'
              type: DEPENDENT
              key: 'docker.container_info.state.oomkilled["{#NAME}"]'
              delay: '0'
              valuemap:
                name: 'Docker flag'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.State.OOMKilled
                - type: BOOL_TO_DECIMAL
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: 627a1f5851aa4f80b81961f349ef05c6
              name: 'Container {#NAME}: Paused'
              type: DEPENDENT
              key: 'docker.container_info.state.paused["{#NAME}"]'
              delay: '0'
              valuemap:
                name: 'Docker flag'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.State.Paused
                - type: BOOL_TO_DECIMAL
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: 769e83e51ba54e56844d6357db7fadc9
              name: 'Container {#NAME}: Pid'
              type: DEPENDENT
              key: 'docker.container_info.state.pid["{#NAME}"]'
              delay: '0'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.State.Pid
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: 27b03fed638546dca8f08b6d200f1dcb
              name: 'Container {#NAME}: Restarting'
              type: DEPENDENT
              key: 'docker.container_info.state.restarting["{#NAME}"]'
              delay: '0'
              valuemap:
                name: 'Docker flag'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.State.Restarting
                - type: BOOL_TO_DECIMAL
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: f45bfeda498a40ff8132bdede3b54fe6
              name: 'Container {#NAME}: Running'
              type: DEPENDENT
              key: 'docker.container_info.state.running["{#NAME}"]'
              delay: '0'
              valuemap:
                name: 'Docker flag'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.State.Running
                - type: BOOL_TO_DECIMAL
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: 36365a86720c45ad9cb85885bf5557d8
              name: 'Container {#NAME}: Status'
              type: DEPENDENT
              key: 'docker.container_info.state.status["{#NAME}"]'
              delay: '0'
              value_type: CHAR
              trends: '0'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.State.Status
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: 'docker.container_info["{#NAME}",full]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: f2183a3eab7a41fdb3d6017ea3c4d1e2
              name: 'Container {#NAME}: Get info'
              key: 'docker.container_info["{#NAME}",full]'
              history: '0'
              value_type: CHAR
              trends: '0'
              description: 'Return low-level information about a container.'
              tags:
                - tag: component
                  value: raw
                - tag: container
                  value: '{#NAME}'
            - uuid: a71f945510714155b74b8f798d312c85
              name: 'Container {#NAME}: CPU percent usage'
              type: DEPENDENT
              key: 'docker.container_stats.cpu_pct_usage["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              units: '%'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.cpu_stats.cpu_usage.percent_usage
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: cpu
                - tag: container
                  value: '{#NAME}'
            - uuid: 14bd6a18d84548d993c18ff16ff6ce9c
              name: 'Container {#NAME}: CPU kernelmode usage per second'
              type: DEPENDENT
              key: 'docker.container_stats.cpu_usage.kernel.rate["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              units: s
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.cpu_stats.cpu_usage.usage_in_kernelmode
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                - type: MULTIPLIER
                  parameters:
                    - '1.0E-9'
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: cpu
                - tag: container
                  value: '{#NAME}'
            - uuid: 1ac31f4930324c0ba55bd63ee721aafe
              name: 'Container {#NAME}: Throttled periods'
              type: DEPENDENT
              key: 'docker.container_stats.cpu_usage.throttled_periods["{#NAME}"]'
              delay: '0'
              description: 'Number of periods when the container hits its throttling limit.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.cpu_stats.throttling_data.throttled_periods
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: cpu
                - tag: container
                  value: '{#NAME}'
            - uuid: f9e0cef44e204f529604c139d248d424
              name: 'Container {#NAME}: Throttled time'
              type: DEPENDENT
              key: 'docker.container_stats.cpu_usage.throttled_time["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              units: s
              description: 'Aggregate time the container was throttled for in nanoseconds.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.cpu_stats.throttling_data.throttled_time
                - type: MULTIPLIER
                  parameters:
                    - '1.0E-9'
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: cpu
                - tag: container
                  value: '{#NAME}'
            - uuid: af78b574a665430abba46851759688fa
              name: 'Container {#NAME}: Throttling periods'
              type: DEPENDENT
              key: 'docker.container_stats.cpu_usage.throttling_periods["{#NAME}"]'
              delay: '0'
              description: 'Number of periods with throttling active.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.cpu_stats.throttling_data.periods
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: cpu
                - tag: container
                  value: '{#NAME}'
            - uuid: 2e96dda6a991466dbb9101bc43d0f2df
              name: 'Container {#NAME}: CPU total usage per second'
              type: DEPENDENT
              key: 'docker.container_stats.cpu_usage.total.rate["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              units: s
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.cpu_stats.cpu_usage.total_usage
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                - type: MULTIPLIER
                  parameters:
                    - '1.0E-9'
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: cpu
                - tag: container
                  value: '{#NAME}'
            - uuid: d34b6aec53254c3d8aae0fe29bc75928
              name: 'Container {#NAME}: CPU usermode usage per second'
              type: DEPENDENT
              key: 'docker.container_stats.cpu_usage.user.rate["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              units: s
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.cpu_stats.cpu_usage.usage_in_usermode
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                - type: MULTIPLIER
                  parameters:
                    - '1.0E-9'
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: cpu
                - tag: container
                  value: '{#NAME}'
            - uuid: 3f5ff5deec6e4bd89bfed3589c9c668c
              name: 'Container {#NAME}: Memory commit bytes'
              type: DEPENDENT
              key: 'docker.container_stats.memory.commit_bytes["{#NAME}"]'
              delay: '0'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.memory_stats.commitbytes
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: memory
                - tag: container
                  value: '{#NAME}'
            - uuid: dc6b02d774964ef99257e5d33d8af5da
              name: 'Container {#NAME}: Memory commit peak bytes'
              type: DEPENDENT
              key: 'docker.container_stats.memory.commit_peak_bytes["{#NAME}"]'
              delay: '0'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.memory_stats.commitpeakbytes
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: memory
                - tag: container
                  value: '{#NAME}'
            - uuid: c0316cbb1d354efb92f4bd2c6bbced80
              name: 'Container {#NAME}: Memory maximum usage'
              type: DEPENDENT
              key: 'docker.container_stats.memory.max_usage["{#NAME}"]'
              delay: '0'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.memory_stats.max_usage
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: memory
                - tag: container
                  value: '{#NAME}'
            - uuid: a82c972f496046b5b9824071b558a6f7
              name: 'Container {#NAME}: Memory private working set'
              type: DEPENDENT
              key: 'docker.container_stats.memory.private_working_set["{#NAME}"]'
              delay: '0'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.memory_stats.privateworkingset
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: memory
                - tag: container
                  value: '{#NAME}'
            - uuid: c6ac2a41fbc04291802a0317e9200acf
              name: 'Container {#NAME}: Memory usage'
              type: DEPENDENT
              key: 'docker.container_stats.memory.usage["{#NAME}"]'
              delay: '0'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.memory_stats.usage
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: memory
                - tag: container
                  value: '{#NAME}'
            - uuid: 3168c24b231b4efbb2f13b531c20582d
              name: 'Container {#NAME}: Online CPUs'
              type: DEPENDENT
              key: 'docker.container_stats.online_cpus["{#NAME}"]'
              delay: '0'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.cpu_stats.online_cpus
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: cpu
                - tag: container
                  value: '{#NAME}'
            - uuid: 03ec3b227dab42efb25de1721fcf5822
              name: 'Container {#NAME}: Current PIDs count'
              type: DEPENDENT
              key: 'docker.container_stats.pids_stats.current["{#NAME}"]'
              delay: '0'
              description: 'Current number of PIDs the container has created.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.pids_stats.current
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: system
                - tag: container
                  value: '{#NAME}'
            - uuid: b457b969106f478eb39326bb0db5d492
              name: 'Container {#NAME}: Get stats'
              key: 'docker.container_stats["{#NAME}"]'
              history: '0'
              value_type: CHAR
              trends: '0'
              description: 'Get container stats based on resource usage.'
              tags:
                - tag: component
                  value: raw
                - tag: container
                  value: '{#NAME}'
            - uuid: d8a2ff0fcc3c4d35ba75d2f9fea9f4e5
              name: 'Container {#NAME}: Networks bytes received per second'
              type: DEPENDENT
              key: 'docker.networks.rx_bytes["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.networks[*].rx_bytes.sum()'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: network
                - tag: container
                  value: '{#NAME}'
            - uuid: b491b8e6456a403cbdc84129a22ef781
              name: 'Container {#NAME}: Networks incoming packets dropped per second'
              type: DEPENDENT
              key: 'docker.networks.rx_dropped["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.networks[*].rx_dropped.sum()'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: network
                - tag: container
                  value: '{#NAME}'
            - uuid: 6ecf98d665a240a897c6daa3fd02b6ca
              name: 'Container {#NAME}: Networks errors received per second'
              type: DEPENDENT
              key: 'docker.networks.rx_errors["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.networks[*].rx_errors.sum()'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: network
                - tag: container
                  value: '{#NAME}'
            - uuid: 8f2ef99ef42846a0b924d10b3e65e745
              name: 'Container {#NAME}: Networks packets received per second'
              type: DEPENDENT
              key: 'docker.networks.rx_packets["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.networks[*].rx_packets.sum()'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: network
                - tag: container
                  value: '{#NAME}'
            - uuid: 8377a00f7ddd4ef38933dddf44e72a47
              name: 'Container {#NAME}: Networks bytes sent per second'
              type: DEPENDENT
              key: 'docker.networks.tx_bytes["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.networks[*].tx_bytes.sum()'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: network
                - tag: container
                  value: '{#NAME}'
            - uuid: dda124c2475b4e9b96c99df18390e865
              name: 'Container {#NAME}: Networks outgoing packets dropped per second'
              type: DEPENDENT
              key: 'docker.networks.tx_dropped["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.networks[*].tx_dropped.sum()'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: network
                - tag: container
                  value: '{#NAME}'
            - uuid: 2a97b2ad6a1c48638208583ca92a8dc6
              name: 'Container {#NAME}: Networks errors sent per second'
              type: DEPENDENT
              key: 'docker.networks.tx_errors["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.networks[*].tx_errors.sum()'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: network
                - tag: container
                  value: '{#NAME}'
            - uuid: d68dcfb0d0dc455ba587f1854de0d47c
              name: 'Container {#NAME}: Networks packets sent per second'
              type: DEPENDENT
              key: 'docker.networks.tx_packets["{#NAME}"]'
              delay: '0'
              value_type: FLOAT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.networks[*].tx_packets.sum()'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'docker.container_stats["{#NAME}"]'
              tags:
                - tag: component
                  value: network
                - tag: container
                  value: '{#NAME}'
          trigger_prototypes:
            - uuid: daf682acd8414c0e8f8fc9281c470b2c
              expression: 'last(/Docker by Zabbix agent 2 mod/docker.container_info.state.exitcode["{#NAME}"])>0 and last(/Docker by Zabbix agent 2 mod/docker.container_info.state.running["{#NAME}"])=0'
              name: 'Docker: Container {#NAME}: Container has been stopped with error code'
              opdata: 'Exit code: {ITEM.LASTVALUE1}'
              priority: AVERAGE
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: availability
          graph_prototypes:
            - uuid: ef6fcdc1708d49719def0cc7ec91aa16
              name: 'Container {#NAME}: CPU usage'
              type: STACKED
              graph_items:
                - color: 199C0D
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.container_stats.cpu_usage.kernel.rate["{#NAME}"]'
                - sortorder: '1'
                  color: F63100
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.container_stats.cpu_usage.user.rate["{#NAME}"]'
                - sortorder: '2'
                  color: 00611C
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.container_stats.cpu_usage.total.rate["{#NAME}"]'
            - uuid: 47df1c26afc740c5a6772debfd386e24
              name: 'Container {#NAME}: Memory usage'
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 199C0D
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.container_stats.memory.usage["{#NAME}"]'
                - sortorder: '1'
                  drawtype: GRADIENT_LINE
                  color: F63100
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.container_stats.memory.max_usage["{#NAME}"]'
            - uuid: e908a59e781d48cf8fe33116824820e2
              name: 'Container {#NAME}: Network packets'
              graph_items:
                - drawtype: BOLD_LINE
                  color: 199C0D
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.networks.rx_packets["{#NAME}"]'
                - sortorder: '1'
                  drawtype: BOLD_LINE
                  color: F63100
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.networks.tx_packets["{#NAME}"]'
                - sortorder: '2'
                  drawtype: BOLD_LINE
                  color: 00611C
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.networks.rx_errors["{#NAME}"]'
                - sortorder: '3'
                  drawtype: BOLD_LINE
                  color: F7941D
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.networks.tx_errors["{#NAME}"]'
                - sortorder: '4'
                  drawtype: BOLD_LINE
                  color: FC6EA3
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.networks.rx_dropped["{#NAME}"]'
                - sortorder: '5'
                  drawtype: BOLD_LINE
                  color: 6C59DC
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.networks.tx_dropped["{#NAME}"]'
            - uuid: f56dce53ad4d4be4b9a21616509513e7
              name: 'Container {#NAME}: Network traffic'
              graph_items:
                - drawtype: BOLD_LINE
                  color: 199C0D
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.networks.rx_bytes["{#NAME}"]'
                - sortorder: '1'
                  drawtype: BOLD_LINE
                  color: F63100
                  item:
                    host: 'Docker by Zabbix agent 2 mod'
                    key: 'docker.networks.tx_bytes["{#NAME}"]'
          host_prototypes:
            - uuid: fc1efbdd68a842d58e89e11103302b46
              host: 'Container {#DNAME}'
              name: 'Container {#DNAME}'
              inventory_mode: AUTOMATIC
              group_links:
                - group:
                    name: 'Docker containers'
              templates:
                - name: 'Docker by Zabbix agent 2 per container'
              macros:
                - macro: '{$NAME}'
                  value: '{#DNAME}'
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  var jsonData = JSON.parse(value);
                  
                  var lld = [];
                  
                  for(var el = 0; el < jsonData.length; el++) {
                  
                  row = jsonData[el];
                  row["{#DNAME}"] = jsonData[el]["{#NAME}"].replace(/^./,'');
                  lld.push(row);
                  
                  }
                  
                  return JSON.stringify(lld);
                  
        - uuid: f095f5defe2647c1ad5e79a6126230d2
          name: 'Images discovery'
          key: docker.images.discovery
          delay: 15m
          filter:
            evaltype: AND
            conditions:
              - macro: '{#NAME}'
                value: '{$DOCKER.LLD.FILTER.IMAGE.MATCHES}'
                formulaid: A
              - macro: '{#NAME}'
                value: '{$DOCKER.LLD.FILTER.IMAGE.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'Discovery of images metrics.'
          item_prototypes:
            - uuid: 1e602d92d8f04d758b12eda654d08c0e
              name: 'Image {#NAME}: Created'
              type: DEPENDENT
              key: 'docker.image.created["{#ID}"]'
              delay: '0'
              units: unixtime
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$[?(@.Id == "{#ID}")].Created.first()'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              master_item:
                key: docker.images
              tags:
                - tag: component
                  value: system
                - tag: image
                  value: '{#NAME}'
            - uuid: d7880c480a3a488c8df87765373d216e
              name: 'Image {#NAME}: Size'
              type: DEPENDENT
              key: 'docker.image.size["{#ID}"]'
              delay: '0'
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$[?(@.Id == "{#ID}")].Size.first()'
              master_item:
                key: docker.images
              tags:
                - tag: component
                  value: storage
                - tag: image
                  value: '{#NAME}'
      tags:
        - tag: class
          value: software
        - tag: target
          value: docker
      macros:
        - macro: '{$DOCKER.LLD.FILTER.CONTAINER.MATCHES}'
          value: '.*'
          description: 'Filter of discoverable containers.'
        - macro: '{$DOCKER.LLD.FILTER.CONTAINER.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Filter to exclude discovered containers.'
        - macro: '{$DOCKER.LLD.FILTER.IMAGE.MATCHES}'
          value: '.*'
          description: 'Filter of discoverable images.'
        - macro: '{$DOCKER.LLD.FILTER.IMAGE.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Filter to exclude discovered images.'
      dashboards:
        - uuid: ea6f2fbc1073487a87321503cd4bae11
          name: 'Docker overview'
          pages:
            - widgets:
                - type: graph
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Docker by Zabbix agent 2 mod'
                        name: 'Docker: Containers'
                    - type: STRING
                      name: reference
                      value: AAAAA
                - type: graph
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Docker by Zabbix agent 2 mod'
                        name: 'Docker: Memory total'
                    - type: STRING
                      name: reference
                      value: AAAAC
                - type: graph
                  'y': '10'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Docker by Zabbix agent 2 mod'
                        name: 'Docker: Images'
                    - type: STRING
                      name: reference
                      value: AAAAE
                - type: graph
                  x: '36'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Docker by Zabbix agent 2 mod'
                        name: 'Docker: Size'
                    - type: STRING
                      name: reference
                      value: AAAAB
                - type: graph
                  x: '36'
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Docker by Zabbix agent 2 mod'
                        name: 'Docker: Goroutines'
                    - type: STRING
                      name: reference
                      value: AAAAD
      valuemaps:
        - uuid: ba10e1eb6291484fa01cad3d88889483
          name: 'Docker container health state'
          mappings:
            - value: '1'
              newvalue: starting
            - value: '2'
              newvalue: unhealthy
            - value: '3'
              newvalue: healthy
            - value: '4'
              newvalue: none
        - uuid: 3aa6dd6c4f364fbab1d3200149592f33
          name: 'Docker date format'
          mappings:
            - value: '-1'
              newvalue: 'Error parsing date'
            - value: '-62135596800'
              newvalue: 'Null time'
        - uuid: 4b5966a43d824c969a1d46b804894c15
          name: 'Docker flag'
          mappings:
            - value: '0'
              newvalue: 'False'
            - value: '1'
              newvalue: 'True'
        - uuid: e3b7dcefc5a24855a4c1ba95b77ed3be
          name: 'Service state'
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
    - uuid: c954f41d0ba94683975468908433e083
      template: 'Docker by Zabbix agent 2 per container'
      name: 'Docker by Zabbix agent 2 per container'
      groups:
        - name: Templates/Modules
      items:
        - uuid: 81bbe14a9b684c53b79f3dae1265aee0
          name: 'Docker CPU percent usage'
          type: DEPENDENT
          key: docker.container_stats.cpu_pct_usage
          delay: '0'
          value_type: FLOAT
          units: '%'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.cpu_stats.cpu_usage.percent_usage
          master_item:
            key: 'docker.container_stats["/{$NAME}"]'
        - uuid: cc5c65002b0049e3b251174fe5b731eb
          name: 'Docker memory usage'
          type: DEPENDENT
          key: docker.container_stats.memory.usage
          delay: '0'
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.memory_stats.usage
          master_item:
            key: 'docker.container_stats["/{$NAME}"]'
        - uuid: 02a17e0b46464a93959ca640e4aa1bcf
          name: 'Docker Current PIDs count'
          type: DEPENDENT
          key: docker.container_stats.pids_stats.current
          delay: '0'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.pids_stats.current
          master_item:
            key: 'docker.container_stats["/{$NAME}"]'
        - uuid: 08ff88e16bb2476da24166e607962302
          name: 'Get stats'
          key: 'docker.container_stats["/{$NAME}"]'
          history: '0'
          value_type: TEXT
          trends: '0'
        - uuid: 142e2a1c7f804fc88c42eb0db10596ef
          name: 'Docker Networks bytes received per second'
          type: DEPENDENT
          key: docker.networks.rx_bytes
          delay: '0'
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.networks[*].rx_bytes.sum()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: CHANGE_PER_SECOND
              parameters:
                - ''
          master_item:
            key: 'docker.container_stats["/{$NAME}"]'
        - uuid: 4d847fda1bbc447a8984bee2bbd22ddb
          name: 'Docker Networks bytes sent per second'
          type: DEPENDENT
          key: docker.networks.tx_bytes
          delay: '0'
          units: B
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.networks[*].tx_bytes.sum()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: CHANGE_PER_SECOND
              parameters:
                - ''
          master_item:
            key: 'docker.container_stats["/{$NAME}"]'
  graphs:
    - uuid: 31e5321159554e78a4a8e7d4f01a4dc1
      name: 'Docker: Containers'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.containers.running
        - sortorder: '1'
          drawtype: BOLD_LINE
          color: F63100
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.containers.paused
        - sortorder: '2'
          drawtype: BOLD_LINE
          color: 00611C
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.containers.stopped
        - sortorder: '3'
          drawtype: BOLD_LINE
          color: F7941D
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.containers.total
    - uuid: 3d688dd0b0b542f0abf20014a7a527e7
      name: 'Docker: Goroutines'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.goroutines
    - uuid: 9cdeb77b79d9441f8d2949f1368f8f61
      name: 'Docker: Images'
      graph_items:
        - drawtype: BOLD_LINE
          color: 199C0D
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.images.top_level
        - sortorder: '1'
          drawtype: BOLD_LINE
          color: F63100
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.images.total
    - uuid: c46233b7d4ac40c88038abee5a562899
      name: 'Docker: Memory total'
      graph_items:
        - drawtype: BOLD_LINE
          color: 199C0D
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.mem.total
    - uuid: ebe6e992fb94412691fc6fa94d6530bc
      name: 'Docker: Size'
      graph_items:
        - drawtype: BOLD_LINE
          color: 199C0D
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.images_size
        - sortorder: '1'
          drawtype: BOLD_LINE
          color: F63100
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.layers_size
        - sortorder: '2'
          drawtype: BOLD_LINE
          color: 00611C
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.containers_size
        - sortorder: '3'
          drawtype: BOLD_LINE
          color: F7941D
          item:
            host: 'Docker by Zabbix agent 2 mod'
            key: docker.volumes_size
